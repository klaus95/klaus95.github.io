<div id="glowscript" class="glowscript">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link type="text/css" href="https://s3.amazonaws.com/glowscript/css/redmond/2.1/jquery-ui.custom.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css" />
    <link type="text/css" href="https://s3.amazonaws.com/glowscript/css/ide.css" rel="stylesheet" />
    <script type="text/javascript" src="https://s3.amazonaws.com/glowscript/lib/jquery/2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://s3.amazonaws.com/glowscript/lib/jquery/2.1/jquery-ui.custom.min.js"></script>
    <script type="text/javascript" src="https://s3.amazonaws.com/glowscript/package/glow.2.7.min.js"></script>
    <script type="text/javascript" src="https://s3.amazonaws.com/glowscript/package/RSrun.2.7.min.js"></script>
    <script type="text/javascript"><!--//--><![CDATA[//><!--
    
    // START JAVASCRIPT
    ;(function() { var __rt=srequire('streamline/lib/callbacks/runtime').runtime(__filename, false),__func=__rt.__func,__cb=__rt.__cb; var RS_modules = {};
    RS_modules.pythonize = {};
    RS_modules.random = {};
    
    (function() {
      function strings() {
        var string_funcs, exclude, name;
        string_funcs = set("capitalize strip lstrip rstrip islower isupper isspace lower upper swapcase center count endswith startswith find rfind index rindex format join ljust rjust partition rpartition replace split rsplit splitlines zfill".split(" "));
        if (!arguments.length) {
          exclude = (function() {
            var s = RS_set();
            s.jsset.add("split");
            s.jsset.add("replace");
            return s;
          })(); }
         else if (arguments[0]) {
          exclude = Array.prototype.slice.call(arguments); }
         else {
          exclude = null; }  ;
    
        if (exclude) {
          string_funcs = string_funcs.difference(set(exclude)); } ;
    
        var RS_Iter0 = RS_Iterable(string_funcs);
        for (var RS_Index0 = 0; RS_Index0["<"](RS_Iter0.length); RS_Index0++) {
          name = RS_Iter0[RS_Index0];
          (RS_expr_temp = String.prototype)[((((typeof name === "number") && name["<"](0))) ? RS_expr_temp.length["+"](name) : name)] = (RS_expr_temp = RS_str.prototype)[((((typeof name === "number") && name["<"](0))) ? RS_expr_temp.length["+"](name) : name)]; }; };  RS_modules.pythonize.strings = strings;
    })();
    
    (function() {
      var RS_seed_state, RS_get_random_byte;
      RS_seed_state = (function() {
        var RS_d = { };
        RS_d["key"] = RS_list_decorate([]);
        RS_d["key_i"] = 0;
        RS_d["key_j"] = 0;
        return RS_d;
      }).call(this);
      RS_get_random_byte = function() {
        var RS_unpack;
        RS_seed_state.key_i = ((RS_seed_state.key_i["+"](1)) % 256);
        RS_seed_state.key_j = ((RS_seed_state.key_j["+"]((RS_expr_temp = RS_seed_state.key)[RS_bound_index(RS_seed_state.key_i, RS_expr_temp)])) % 256);
        RS_unpack = [(RS_expr_temp = RS_seed_state.key)[RS_bound_index(RS_seed_state.key_j, RS_expr_temp)],(RS_expr_temp = RS_seed_state.key)[RS_bound_index(RS_seed_state.key_i, RS_expr_temp)],];
    
        (RS_expr_temp = RS_seed_state.key)[RS_bound_index(RS_seed_state.key_i, RS_expr_temp)] = RS_unpack[0];
        (RS_expr_temp = RS_seed_state.key)[RS_bound_index(RS_seed_state.key_j, RS_expr_temp)] = RS_unpack[1];
        return (RS_expr_temp = RS_seed_state.key)[RS_bound_index((((RS_expr_temp = RS_seed_state.key)[RS_bound_index(RS_seed_state.key_i, RS_expr_temp)]["+"]((RS_expr_temp = RS_seed_state.key)[RS_bound_index(RS_seed_state.key_j, RS_expr_temp)])) % 256), RS_expr_temp)]; };
    
      function seed() {
        var x = ((((arguments[0] === undefined) || (((((0 === arguments.length["-"](1)) && (arguments[arguments.length["-"](1)] !== null)) && (typeof arguments[arguments.length["-"](1)] === "object")) && (arguments[arguments.length["-"](1)][RS_kwargs_symbol] === true))))) ? seed.__defaults__.x : arguments[0]);
        var RS_kwargs_obj = arguments[arguments.length["-"](1)];
        if ((((RS_kwargs_obj === null) || (typeof RS_kwargs_obj !== "object")) || (RS_kwargs_obj[RS_kwargs_symbol] !== true))) { RS_kwargs_obj = { }; };
        if (Object.prototype.hasOwnProperty.call(RS_kwargs_obj, "x")) {
          x = RS_kwargs_obj.x; } ;
    
        var i, j, RS_unpack;
        RS_seed_state.key_i = RS_seed_state.key_j = 0;
        if ((typeof x === "number")) {
          x = x.toString(); }
         else if ((typeof x !== "string")) {
          throw new TypeError("unhashable type: '"["+"](typeof x)["+"]("'")); }  ;
    
        for (var RS_Index1 = 0; RS_Index1["<"](256); RS_Index1++) {
          i = RS_Index1;
          (RS_expr_temp = RS_seed_state.key)[((((typeof i === "number") && i["<"](0))) ? RS_expr_temp.length["+"](i) : i)] = i; };
    
        j = 0;
        for (var RS_Index2 = 0; RS_Index2["<"](256); RS_Index2++) {
          i = RS_Index2;
          j = ((j["+"]((RS_expr_temp = RS_seed_state.key)[((((typeof i === "number") && i["<"](0))) ? RS_expr_temp.length["+"](i) : i)])["+"](x.charCodeAt((i % x.length)))) % 256);
          RS_unpack = [(RS_expr_temp = RS_seed_state.key)[((((typeof j === "number") && j["<"](0))) ? RS_expr_temp.length["+"](j) : j)],(RS_expr_temp = RS_seed_state.key)[((((typeof i === "number") && i["<"](0))) ? RS_expr_temp.length["+"](i) : i)],];
    
          (RS_expr_temp = RS_seed_state.key)[((((typeof i === "number") && i["<"](0))) ? RS_expr_temp.length["+"](i) : i)] = RS_unpack[0];
          (RS_expr_temp = RS_seed_state.key)[((((typeof j === "number") && j["<"](0))) ? RS_expr_temp.length["+"](j) : j)] = RS_unpack[1]; }; };
    
    
      if (!seed.__defaults__) { Object.defineProperties(seed, {
          __defaults__: { value: { x: (new Date).getTime() } },
          __handles_kwarg_interpolation__: { value: true },
          __argnames__: { value: ["x",] } }); };
    
    
      seed();
      function random() {
        var n, m, i;
        n = 0;
        m = 1;
        for (var RS_Index3 = 0; RS_Index3["<"](8); RS_Index3++) {
          i = RS_Index3;
          n = n["+="](RS_get_random_byte()["*"](m));
          m = m["*="](256); };
    
        return n["/"](18446744073709552000); };
    
    
      function randrange() {
        return choice(range.apply(this, arguments)); };
    
    
      function randint(a, b) {
        return int(random()["*"](b["-"](a)["+"](1))["+"](a)); };
    
      if (!randint.__argnames__) { Object.defineProperties(randint, {
          __argnames__: { value: ["a","b",] } }); };
    
    
      function uniform(a, b) {
        return random()["*"](b["-"](a))["+"](a); };
    
      if (!uniform.__argnames__) { Object.defineProperties(uniform, {
          __argnames__: { value: ["a","b",] } }); };
    
    
      function choice(seq) {
        if (seq.length[">"](0)) {
          return seq[RS_bound_index(Math.floor(random()["*"](seq.length)), seq)]; }
         else {
          throw new IndexError; } ; };
    
    
      if (!choice.__argnames__) { Object.defineProperties(choice, {
          __argnames__: { value: ["seq",] } }); };
    
    
      function shuffle() {
        var x = ((((((0 === arguments.length["-"](1)) && (arguments[arguments.length["-"](1)] !== null)) && (typeof arguments[arguments.length["-"](1)] === "object")) && (arguments[arguments.length["-"](1)][RS_kwargs_symbol] === true))) ? undefined : arguments[0]);
        var random_f = ((((arguments[1] === undefined) || (((((1 === arguments.length["-"](1)) && (arguments[arguments.length["-"](1)] !== null)) && (typeof arguments[arguments.length["-"](1)] === "object")) && (arguments[arguments.length["-"](1)][RS_kwargs_symbol] === true))))) ? shuffle.__defaults__.random_f : arguments[1]);
        var RS_kwargs_obj = arguments[arguments.length["-"](1)];
        if ((((RS_kwargs_obj === null) || (typeof RS_kwargs_obj !== "object")) || (RS_kwargs_obj[RS_kwargs_symbol] !== true))) { RS_kwargs_obj = { }; };
        if (Object.prototype.hasOwnProperty.call(RS_kwargs_obj, "random_f")) {
          random_f = RS_kwargs_obj.random_f; } ;
    
        var j, RS_unpack, i;
        for (var RS_Index4 = 0; RS_Index4["<"](x.length); RS_Index4++) {
          i = RS_Index4;
          j = Math.floor(random_f()["*"](i["+"](1)));
          RS_unpack = [x[((((typeof j === "number") && j["<"](0))) ? x.length["+"](j) : j)],x[((((typeof i === "number") && i["<"](0))) ? x.length["+"](i) : i)],];
          x[((((typeof i === "number") && i["<"](0))) ? x.length["+"](i) : i)] = RS_unpack[0];
          x[((((typeof j === "number") && j["<"](0))) ? x.length["+"](j) : j)] = RS_unpack[1]; };
    
        return x; };
    
      if (!shuffle.__defaults__) { Object.defineProperties(shuffle, {
          __defaults__: { value: { random_f: random } },
          __handles_kwarg_interpolation__: { value: true },
          __argnames__: { value: ["x","random_f",] } }); };
    
    
      function sample(population, k) {
        var x, j, RS_unpack, i;
        x = population.slice();
        for (var RS_Index5 = population.length["-"](1); RS_Index5[">"](population.length["-"](k)["-"](1)); RS_Index5 = RS_Index5["-="](1)) {
          i = RS_Index5;
          j = Math.floor(random()["*"](i["+"](1)));
          RS_unpack = [x[((((typeof j === "number") && j["<"](0))) ? x.length["+"](j) : j)],x[((((typeof i === "number") && i["<"](0))) ? x.length["+"](i) : i)],];
          x[((((typeof i === "number") && i["<"](0))) ? x.length["+"](i) : i)] = RS_unpack[0];
          x[((((typeof j === "number") && j["<"](0))) ? x.length["+"](j) : j)] = RS_unpack[1]; };
    
        return x.slice(population.length["-"](k)); };
    
      if (!sample.__argnames__) { Object.defineProperties(sample, {
          __argnames__: { value: ["population","k",] } }); };
    
    
      RS_modules.random.RS_seed_state = RS_seed_state;
      RS_modules.random.RS_get_random_byte = RS_get_random_byte;
      RS_modules.random.seed = seed;
      RS_modules.random.random = random;
      RS_modules.random.randrange = randrange;
      RS_modules.random.randint = randint;
      RS_modules.random.uniform = uniform;
      RS_modules.random.choice = choice;
      RS_modules.random.shuffle = shuffle;
      RS_modules.random.sample = sample;
    })();
    function main(_) { var version, box, sphere, simple_sphere, cylinder, pyramid, cone, helix, ellipsoid, ring, arrow, compound, display, vector, print, scene, RS_ls, cylinder_r, number_of_rods, rod_upper_boundry, rod_lower_boundry, box_h, box_w, box_d, sphere_r, distance_from_corner, start_cord, goal_cord, lamda, step, cylinder_zone, distance_between_cylinders, ball, goal, terrain, index, rods, safe, x, y, rod, goal_dt, goal_displacment, __name__, strings, uniform, RS_Iter6, RS_Index6, __this = this;  function distanceAB(pointA, pointB) {
        var RS_ls;
        "53";
        return sqrt(pow(abs(pointA.x["-"](pointB.x)), 2)["+"](pow(abs(pointA.z["-"](pointB.z)), 2))); };
      function goalReached(ballPosition, goalPosition, deltaTime) {
        var RS_ls, delta, upper_x, lower_x, upper_y, lower_y;
        "79";
        delta = deltaTime["/"](2);
        "80";
        upper_x = goalPosition.x["+"](delta);
        "81";
        lower_x = goalPosition.x["-"](delta);
        "82";
        upper_y = goalPosition.z["+"](delta);
        "83";
        lower_y = goalPosition.z["-"](delta);
        "85";
        if ((ballPosition.x[">"](lower_x) && ballPosition.x["<"](upper_x))) {
          "86";
          if ((ballPosition.z[">"](lower_y) && ballPosition.z["<"](upper_y))) {
            "87";
            return true; } ; } ;
    
    
        "88";
        return false; };
    
    
      function goalMovement(position, dis) {
        var RS_ls, max_goal_height, min_goal_height;
        "92";
        max_goal_height = 0.3;
        "93";
        min_goal_height = sphere_r["/"](2);
        "94";
        if (goal.pos.y[">"](max_goal_height)) {
          "95";
          return vector(0, 1["-u"](), 0); } ;
    
        "96";
        if (goal.pos.y["<"](min_goal_height)) {
          "97";
          return vector(0, 1, 0); } ;
    
        "98";
        return dis; };
    
    
      function cPathCost(current_pos, goal_pos, list_rods) {
        var RS_ls, pathCost, rods;
        "102";
        pathCost = distanceAB(current_pos, goal_pos);
        "103";
        var RS_Iter7 = RS_Iterable(list_rods);
        for (var RS_Index7 = 0; RS_Index7["<"](RS_Iter7.length); RS_Index7++) {
          rods = RS_Iter7[RS_Index7];
          "104";
          pathCost = pathCost["+="](field(distanceAB(current_pos, rods.pos))); };
    
        "105";
        return pathCost; };
    
    
      function field(distance) {
        var RS_ls, R;
        "109";
        R = cylinder_r["+"](cylinder_zone);
        "110";
        if (distance[">"](R)) {
          return 0; }
         else {
          return log(R["/"](distance)); } ; };  function gradientDecent(curr_pos, goal_pos, list_rods) {
        var RS_ls, y1, y2, x1, x2, cx, cy, norm;
        "116";
        y1 = vector(curr_pos.x, curr_pos.y, curr_pos.z["+"](step));
        "117";
        y2 = vector(curr_pos.x, curr_pos.y, curr_pos.z["-"](step));
        "118";
        x1 = vector(curr_pos.x["+"](step), curr_pos.y, curr_pos.z);
        "119";
        x2 = vector(curr_pos.x["-"](step), curr_pos.y, curr_pos.z);
        "121";
        cx = cPathCost(x1, goal_pos, list_rods)["-"](cPathCost(x2, goal_pos, list_rods));
        "122";
        cy = cPathCost(y1, goal_pos, list_rods)["-"](cPathCost(y2, goal_pos, list_rods));
        "124";
        norm = sqrt(pow(cx, 2)["+"](pow(cy, 2)));
        "126";
        return vector(cx["/"](norm), 0, cy["/"](norm)); }; var __frame = { name: "main", line: 180 }; return __func(_, this, arguments, main, 0, __frame, function __$main() { version = RS_list_decorate(["2.7","glowscript",]); Array.prototype["+"] = function(r) { return this.concat(r); }; Array.prototype["*"] = function(r) { return __array_times_number(this, r); }; __name__ = "__main__"; window.__GSlang = "vpython"; box = vp_box; sphere = vp_sphere; simple_sphere = vp_simple_sphere; cylinder = vp_cylinder; pyramid = vp_pyramid; cone = vp_cone; helix = vp_helix; ellipsoid = vp_ellipsoid; ring = vp_ring; arrow = vp_arrow; compound = vp_compound; display = canvas; vector = vec; print = GSprint; scene = canvas(); strings = RS_modules.pythonize.strings; strings(); uniform = RS_modules.random.uniform; "6"; cylinder_r = 0.3; "7"; number_of_rods = 30; "8"; rod_upper_boundry = 4.5; "9"; rod_lower_boundry = 4.5["-u"](); "12"; box_h = 0.01; "13"; box_w = 10; "14"; box_d = 10; "17"; sphere_r = 0.1; "18"; distance_from_corner = 0.5; "19"; start_cord = distance_from_corner["-"](box_d["/"](2)); "20"; goal_cord = box_d["/"](2)["-"](distance_from_corner); "23"; lamda = 0.001; "24"; step = 0.005; "25"; cylinder_zone = 0.1; "26"; distance_between_cylinders = 2["*"](cylinder_r["+"](sphere_r)["+"](cylinder_zone)); "29"; scene.range = 8.155223364548897; "30"; scene.fov = 1; "31"; scene.forward = vector(0.128495, 0.9871["-u"](), 0.095511); "32"; scene.center = vector(0, 0, 0); "33"; scene.width = 900; "34"; scene.height = 900; "37"; ball = RS_interpolate_kwargs.call(__this, sphere, [RS_desugar_kwargs({ color: vector(0, 1, 0), radius: sphere_r, make_trail: true, pos: vector(start_cord, box_h["/"](2)["+"](sphere_r), start_cord), mass: 1 }),]); "43"; goal = RS_interpolate_kwargs.call(__this, sphere, [RS_desugar_kwargs({ color: vector(0, 1, 0), radius: sphere_r["/"](2), pos: vector(goal_cord, box_h["/"](2)["+"](sphere_r), goal_cord), mass: 1 }),]); "48"; terrain = RS_interpolate_kwargs.call(__this, box, [RS_desugar_kwargs({ color: vector(0.5, 0.5, 0.5), pos: vector(0, 0, 0), size: vector(box_w, box_h, box_d) }),]); "52"; if (!distanceAB.__argnames__) { Object.defineProperties(distanceAB, { __argnames__: { value: ["pointA","pointB",] } }); } ; "56"; index = 0; "57"; rods = RS_list_decorate([]); "58"; while (index["<"](number_of_rods)) { "59"; safe = true; "61"; x = uniform(rod_lower_boundry, rod_upper_boundry); "62"; y = uniform(rod_lower_boundry, rod_upper_boundry); "64"; RS_Iter6 = RS_Iterable(rods); for (RS_Index6 = 0; RS_Index6["<"](RS_Iter6.length); RS_Index6++) { rod = RS_Iter6[RS_Index6]; "65"; if (distanceAB(vector(x, 0, y), rod.pos)["<"](distance_between_cylinders)) { "66"; index = index["-="](1); "67"; safe = false; "68"; break; } ; }; "70"; if (safe) { "71"; rods.append(RS_interpolate_kwargs.call(__this, cylinder, [RS_desugar_kwargs({ color: vector(1, 0, 0), pos: vector(x, box_h["/"](2), y), axis: vector(0, 1, 0), radius: cylinder_r }),])); } ; "75"; index = index["+="](1); }; "78"; if (!goalReached.__argnames__) { Object.defineProperties(goalReached, { __argnames__: { value: ["ballPosition","goalPosition","deltaTime",] } }); } ; "91"; if (!goalMovement.__argnames__) { Object.defineProperties(goalMovement, { __argnames__: { value: ["position","dis",] } }); } ; "101"; if (!cPathCost.__argnames__) { Object.defineProperties(cPathCost, { __argnames__: { value: ["current_pos","goal_pos","list_rods",] } }); } ; "108"; if (!field.__argnames__) { Object.defineProperties(field, { __argnames__: { value: ["distance",] } }); } ; "114";
    
        if (!gradientDecent.__argnames__) { Object.defineProperties(gradientDecent, {
            __argnames__: { value: ["curr_pos","goal_pos","list_rods",] } }); } ;
    
    
        "129";
        goal_dt = 0.0005;
        "130";
        goal_displacment = vector(0, 1, 0);
        "133"; return (function ___(__break) { var __more; var __loop = __cb(_, __frame, 0, 0, function __$main() { __more = false;
            var __1 = true; if (__1) {
              "134";
              return rate(1000, __cb(_, __frame, 237, 8, function __$main() {
                "137";
                ball.pos = ball.pos["-="](lamda["*"](gradientDecent(ball.pos, goal.pos, rods)));
                "138";
                goal.visible = !goalReached(ball.pos, goal.pos, step);
                "139";
                if (!goal.visible) { return __break(); } ;
    
    
                "142";
                goal.pos = goal.pos["+="](goal_displacment["/"](goal.mass)["*"](goal_dt));
                "143";
                goal_displacment = goalMovement(goal.pos.y, goal_displacment); while (__more) { __loop(); }; __more = true; }, true)); } else { __break(); } ; }); do { __loop(); } while (__more); __more = true; })(_); });};
    
    
    if (!main.__argnames__) { Object.defineProperties(main, {
        __argnames__: { value: ["_",] } });};
    
    ;$(function(){ window.__context = { glowscript_container: $("#glowscript").removeAttr("id") }; main(__func) })})()
    // END JAVASCRIPT
    
    //--><!]]></script>
    </div>